(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{30:function(e,t,n){},39:function(e,t,n){},59:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n(1),a=n(31),r=n.n(a),o=(n(39),n(5)),i=n.n(o),u=n(2),l=n.n(u),j=n(7),p=n(4),b=Object(c.createContext)();function d(e){var t=Object(c.useState)(void 0),n=Object(p.a)(t,2),a=n[0],r=n[1];function o(){return u.apply(this,arguments)}function u(){return(u=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("http://localhost:3100/user/loggedIn");case 2:t=e.sent,r(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){o()}),[]),Object(s.jsx)(b.Provider,{value:{user:a,getUser:o},children:e.children})}var h=b,O=n(12),m=n(3);n(59);var f=function(){var e=Object(c.useContext)(h).user,t=Object(m.f)();function n(){return(n=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("http://localhost:3100/user/loggedOut");case 2:t.push("/login");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.jsxs)("div",{className:"navbar",children:[Object(s.jsx)("div",{className:"logo",children:Object(s.jsx)("a",{href:"/",children:Object(s.jsx)("h1",{children:"Home"})})}),e?Object(s.jsx)("button",{onClick:function(){return n.apply(this,arguments)},style:{color:"red",cursor:"pointer"},children:"Log Out"}):Object(s.jsxs)("div",{className:"auths",children:[Object(s.jsx)(O.b,{to:"/login",children:Object(s.jsx)("h2",{children:"Login"})}),Object(s.jsx)(O.b,{to:"/register",children:Object(s.jsx)("h2",{children:"Register"})})]})]})},x=n(33);n(65),n(66);var v=function(e){return Object(s.jsx)("div",{className:"indi-comment",children:Object(s.jsxs)("div",{className:"comment-box",children:[Object(s.jsxs)("div",{className:"comment-by",children:[e.comment.email," said:"]}),Object(s.jsx)("div",{className:"comment-container",children:e.comment.comment})]})})};var g=function(e){var t=Object(c.useState)([]),n=Object(p.a)(t,2),a=n[0],r=n[1],o=e.user,u=Object(c.useState)(""),b=Object(p.a)(u,2),d=b[0],h=b[1],O=Object(c.useState)("btn-not-like"),m=Object(p.a)(O,2),f=m[0],x=m[1],g=Object(c.useState)(e.post.likes.length),y=Object(p.a)(g,2),k=y[0],N=y[1];function w(){return C.apply(this,arguments)}function C(){return(C=Object(j.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.get("http://localhost:3100/comments/"+e.post._id);case 2:return n=t.sent,t.t0=e.post.likes,t.next=6,o.userId;case 6:if(t.t1=t.sent,!t.t0.includes.call(t.t0,t.t1)){t.next=9;break}x("btn-like");case 9:r(n.data);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(){return(P=Object(j.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.delete("http://localhost:3100/posts/"+e.post._id);case 2:e.getPosts();case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(){return(S=Object(j.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h(""),n={comment:d,postId:e.post._id},t.next=4,i.a.post("http://localhost:3100/comments/"+e.post._id,n).then((function(e){return console.log(e)}));case 4:w();case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(){return(I=Object(j.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={postId:e.post._id,userId:o.userId},"btn-not-like"!==f){t.next=9;break}return x("btn-like"),t.next=5,i.a.put("http://localhost:3100/posts/like",n);case 5:e.getPosts(),N(k+1),t.next=15;break;case 9:if("btn-like"!==f){t.next=15;break}return x("btn-not-like"),t.next=13,i.a.put("http://localhost:3100/posts/unlike",n);case 13:e.getPosts(),N(k-1);case 15:case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){w()}),[]),Object(s.jsxs)("div",{className:"post",children:[Object(s.jsxs)("div",{className:"left",children:[e.post.email&&Object(s.jsxs)("h2",{className:"name",children:["By ",Object(s.jsx)("button",{className:"btn-user-profile",children:e.post.email})," "]}),Object(s.jsx)("img",{className:"image",src:"http://localhost:3100/"+e.post.postImage,height:"400",width:"300"}),o&&Object(s.jsxs)("button",{className:f,onClick:function(){return I.apply(this,arguments)},children:["Likes :",k]}),e.post.desc&&Object(s.jsx)("h2",{className:"desc",children:e.post.desc}),"http://localhost:3100/posts/"!==e.defaultUrl&&Object(s.jsx)("button",{className:"btn-delete",onClick:function(){return P.apply(this,arguments)},children:"Delete Post"})]}),Object(s.jsxs)("div",{className:"right",children:[Object(s.jsxs)("div",{className:"comments",children:["Comments",a.map((function(e,t){return Object(s.jsx)(v,{comment:e,getComments:w,user:o},t)}))]}),o&&Object(s.jsxs)("div",{className:"add-comments",children:["Add Comments",Object(s.jsx)("textarea",{className:"comment-input",onChange:function(e){h(e.target.value)},value:d}),Object(s.jsx)("button",{className:"btn-comment",onClick:function(){return S.apply(this,arguments)},children:"Post Comment"})]})]})]})};n(67);var y=function(e){var t=Object(c.useState)(""),n=Object(p.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(void 0),u=Object(p.a)(o,2),b=u[0],d=u[1];return Object(s.jsxs)("div",{className:"post-editor",children:[Object(s.jsxs)("form",{onSubmit:h,children:[Object(s.jsx)("textarea",{id:"editor-description",type:"text",placeholder:"Enter some description here",value:a,onChange:function(e){return r(e.target.value)}}),Object(s.jsx)("input",{id:"editor-upload",type:"file",onChange:function(e){console.log(e.target.files[0]),d(e.target.files[0])}})]}),Object(s.jsx)("button",{className:"btn-upload",type:"submit",onClick:h,children:"Upload Post"}),Object(s.jsx)("button",{className:"btn-cancel",type:"button",onClick:m,children:"Cancel"})]});function h(e){return O.apply(this,arguments)}function O(){return(O=Object(j.a)(l.a.mark((function t(n){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),(s=new FormData).append("desc",a),s.append("postImage",b),console.log(s),t.next=7,i.a.post("http://localhost:3100/posts/",s).then((function(e){return console.log(e)}));case 7:e.getPosts(),m();case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(){e.setNewPostUploaderOpen(!1),r(""),d(void 0)}};n(68);var k=function(){var e=Object(c.useContext)(h).user,t=Object(c.useState)("http://localhost:3100/posts/"),n=Object(p.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)([]),u=Object(p.a)(o,2),b=u[0],d=u[1],O=Object(c.useState)(!1),m=Object(p.a)(O,2),f=m[0],v=m[1],k=Object(c.useState)(null),N=Object(p.a)(k,2),w=N[0],C=N[1];function P(){r("http://localhost:3100/user?email="+e.email),S()}function S(){return I.apply(this,arguments)}function I(){return(I=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get(a);case 2:t=e.sent,console.log(t.data),d(t.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){C(e)}return Object(c.useEffect)((function(){S()}),[]),Object(s.jsxs)("div",{className:"home",children:[e?Object(s.jsxs)("div",{className:"current-user",children:["Welcome ",e.email]}):Object(s.jsx)("div",{className:"current-user",children:"Please Sign-in to like and comment"}),!f&&e&&Object(s.jsx)("button",{className:"btn-add-post",onClick:function(){return v(!0)},children:"Add Post"}),e&&Object(s.jsx)("button",{className:"btn-my-post",onClick:P,children:"My Posts"}),f&&Object(s.jsx)(y,{setNewPostUploaderOpen:v,getPosts:S,editPostData:w}),function(){var t=Object(x.a)(b);return(t=t.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}))).map((function(t,n){return Object(s.jsx)(g,{post:t,defaultUrl:a,getPosts:S,editPost:D,user:e,myPosts:P,setMyPosts:r},n)}))}()]})};n(30);var N=function(){var e=Object(c.useState)(""),t=Object(p.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),o=Object(p.a)(r,2),u=o[0],b=o[1],d=Object(m.f)();function h(){return(h=Object(j.a)(l.a.mark((function e(t){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s={email:n,password:u},e.next=4,i.a.post("http://localhost:3100/user/signup",s);case 4:d.push("/login");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.jsxs)("div",{className:"auth-form",children:[Object(s.jsx)("h2",{children:"Register"}),Object(s.jsxs)("form",{className:"form",onSubmit:function(e){return h.apply(this,arguments)},children:[Object(s.jsx)("input",{type:"email",placeholder:"   enter your email here",value:n,onChange:function(e){return a(e.target.value)}}),Object(s.jsx)("input",{type:"text",placeholder:"   set a password",value:u,onChange:function(e){return b(e.target.value)}}),Object(s.jsx)("button",{type:"submit",children:"Register"})]}),Object(s.jsxs)("p",{children:["Already Have an account ? ",Object(s.jsx)(O.b,{to:"/login",children:"login Instead"})," "]})]})};var w=function(){var e=Object(c.useState)(""),t=Object(p.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),o=Object(p.a)(r,2),u=o[0],b=o[1],d=Object(m.f)(),f=Object(c.useContext)(h).getUser;function x(){return(x=Object(j.a)(l.a.mark((function e(t){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s={email:n,password:u},e.next=4,i.a.post("http://localhost:3100/user/login",s);case 4:return e.next=6,f();case 6:d.push("/");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.jsxs)("div",{className:"auth-form",children:[Object(s.jsx)("h2",{children:"Login"}),Object(s.jsxs)("form",{className:"form",onSubmit:function(e){return x.apply(this,arguments)},children:[Object(s.jsx)("input",{type:"email",placeholder:"   enter your email here",value:n,onChange:function(e){return a(e.target.value)}}),Object(s.jsx)("input",{type:"test",placeholder:"   enter password",value:u,onChange:function(e){return b(e.target.value)}}),Object(s.jsx)("button",{type:"submit",children:"Log In"})]}),Object(s.jsxs)("p",{children:["Don't have an account ? ",Object(s.jsx)(O.b,{to:"/register",children:"Sign UP Instead"})," "]})]})};var C=function(){return Object(s.jsxs)(O.a,{children:[Object(s.jsx)(f,{}),Object(s.jsxs)(m.c,{children:[Object(s.jsx)(m.a,{exact:!0,path:"/",children:Object(s.jsx)(k,{})}),Object(s.jsx)(m.a,{path:"/login",children:Object(s.jsx)(w,{})}),Object(s.jsx)(m.a,{path:"/register",children:Object(s.jsx)(N,{})})]})]})};n(69);i.a.defaults.withCredentials=!0;var P=function(){return Object(s.jsx)(d,{children:Object(s.jsx)("div",{className:"container",children:Object(s.jsx)(C,{})})})};r.a.render(Object(s.jsx)(P,{}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.218f4bbd.chunk.js.map